<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutoriel D√©butant : Apprendre √† Coder avec Python et Assistant IA Gemini</title>
    <!-- Chargement de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuration de la police Inter -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Style personnalis√© pour la zone de code */
        pre {
            @apply bg-gray-900 text-white p-4 rounded-lg shadow-inner overflow-x-auto text-sm;
        }
        code {
            @apply bg-gray-200 text-gray-800 px-1 rounded;
        }
        .reference {
            @apply bg-green-100 border-l-4 border-green-600 p-4 my-4 rounded-r-lg;
        }
        .note {
            @apply bg-yellow-100 border-l-4 border-yellow-600 p-4 my-4 rounded-r-lg;
        }
    </style>
</head>
<body class="bg-gray-50 p-4 sm:p-8">

    <div class="container mx-auto max-w-4xl bg-white shadow-2xl rounded-xl">

        <!-- En-t√™te -->
        <header class="bg-green-700 text-white p-8 rounded-t-xl text-center">
            <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight">üêç Tutoriel D√©butant : Coder en Python</h1>
            <p class="mt-2 text-lg font-light">De la base √† votre premier assistant IA avec Gemini.</p>
        </header>

        <main class="p-6 sm:p-10">

            <!-- Section 1: Pr√©paration -->
            <section class="mb-10">
                <h2 class="text-3xl font-bold text-green-700 border-b-2 border-green-300 pb-2 mb-6">1. Pr√©parer votre environnement</h2>

                <div class="step mb-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">1.1 Installation de Python</h3>
                    <p class="text-gray-600">Rendez-vous sur le site officiel de Python pour le t√©l√©chargement. C'est la premi√®re √©tape cruciale.</p>
                    <ul class="list-disc list-inside ml-4 mt-2 space-y-1 text-gray-700">
                        <li>**Important** : Sous Windows, cochez toujours **"Add Python to PATH"**.</li>
                        <li>V√©rifiez l'installation dans votre terminal avec : <code>python --version</code></li>
                    </ul>
                    <div class="reference">
                        <p class="font-bold text-green-800">üîé Pour plus d'informations :</p>
                        <p>Consultez le **Chapitre 1** de **"Python pour les Nuls, 3e √©d."** pour un guide d'installation d√©taill√©.</p>
                    </div>
                </div>

                <div class="step">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">1.2 "Hello World!"</h3>
                    <p class="text-gray-600">Votre premier programme. Cr√©ez un fichier <code>hello.py</code> et ex√©cutez-le.</p>
                    <pre><code class="language-python">print("Bonjour le monde de Python!")</code></pre>
                </div>
            </section>

            <!-- Section 2: Bases du Langage -->
            <section class="mb-10">
                <h2 class="text-3xl font-bold text-green-700 border-b-2 border-green-300 pb-2 mb-6">2. Les Fondamentaux (Variables et Types)</h2>
                <p class="text-gray-600 mb-4">Les variables sont des √©tiquettes pour stocker des donn√©es (nombres, textes, etc.).</p>

                <h3 class="text-xl font-semibold text-gray-800 mb-2">2.1 Types de Donn√©es Essentiels</h3>
                <ul class="list-disc list-inside ml-4 mt-2 space-y-1 text-gray-700">
                    <li><code>str</code> (Cha√Æne de caract√®res) : <code>"Texte"</code></li>
                    <li><code>int</code> (Entier) : <code>42</code></li>
                    <li><code>float</code> (Nombre d√©cimal) : <code>3.14</code></li>
                    <li><code>bool</code> (Bool√©en) : <code>True</code> ou <code>False</code></li>
                </ul>

                <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">2.2 Exemple de D√©claration</h3>
                <pre><code class="language-python"># D√©claration des variables
nom = "Julie"
annee = 2025
temperature = 18.5
est_ete = False

# Afficher avec une f-string (formatage de cha√Æne)
print(f"{nom} est l'ann√©e {annee}. Fait-il chaud ? {est_ete}")</code></pre>
                <div class="reference">
                    <p class="font-bold text-green-800">üîé Pour plus d'informations :</p>
                    <p>Pour ma√Ætriser les variables et les types de donn√©es, consultez le **Chapitre 4** de **"Python pour les Nuls, 3e √©d."**.</p>
                </div>
            </section>

            <!-- Section 3: Assistant IA Gemini -->
            <section class="mb-10">
                <h2 class="text-3xl font-bold text-green-700 border-b-2 border-green-300 pb-2 mb-6">3. Cr√©er un Assistant IA avec Gemini</h2>
                <p class="text-gray-600 mb-4">Nous allons utiliser l'API Gemini pour obtenir des suggestions de projets personnalis√©s.</p>
                

                <h3 class="text-xl font-semibold text-gray-800 mb-2">3.1 Le Code de l'Assistant (HTML/JS)</h3>
                <div class="note">
                    **Attention :** Le code ci-dessous est en **JavaScript** et doit √™tre ex√©cut√© dans le navigateur. Il fait un appel √† l'API Gemini pour g√©n√©rer du texte.
                </div>

                <div id="assistant-ui" class="bg-gray-100 p-6 rounded-lg shadow-lg">
                    <h4 class="text-2xl font-semibold text-blue-800 mb-4">Assistant de Projet Python (Propuls√© par Gemini)</h4>
                    
                    <label for="interest" class="block text-gray-700 font-medium mb-1">Votre niveau et vos int√©r√™ts (Ex: D√©butant, jeux vid√©o)</label>
                    <input type="text" id="interest" class="w-full p-2 border border-gray-300 rounded-lg mb-4 focus:ring-blue-500 focus:border-blue-500" placeholder="Entrez votre niveau et vos int√©r√™ts ici...">
                    
                    <button id="generate-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">
                        G√©n√©rer une id√©e de projet
                    </button>

                    <div id="loading" class="mt-4 hidden text-center">
                        <div class="animate-spin inline-block w-6 h-6 border-[3px] border-current border-t-transparent text-blue-600 rounded-full" role="status">
                            <span class="sr-only">Chargement...</span>
                        </div>
                        <p class="text-blue-600 mt-2">L'IA de Gemini r√©fl√©chit √† votre projet...</p>
                    </div>

                    <div id="result" class="mt-6 p-4 bg-white border border-blue-200 rounded-lg shadow-inner hidden">
                        <h5 class="text-lg font-bold text-blue-700 mb-2">Suggestion de Projet :</h5>
                        <p id="gemini-output" class="whitespace-pre-wrap text-gray-700"></p>
                    </div>

                    <div id="error-message" class="mt-6 p-4 bg-red-100 border border-red-500 text-red-700 rounded-lg shadow-inner hidden">
                        <p class="font-bold">Erreur :</p>
                        <p id="error-text"></p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Pied de page -->
        <footer class="bg-gray-800 text-white p-6 text-center rounded-b-xl">
            <h3 class="text-xl font-semibold mb-2">4. Prochaines √âtapes Essentielles</h3>
            <p class="text-sm">Pour passer au niveau sup√©rieur :</p>
            <ul class="list-none mt-2 space-y-1 text-gray-300">
                <li>Ma√Ætrisez les **Conditions** (<code>if/else</code>) et les **Boucles** (<code>for/while</code>).
                    <div class="reference inline-block p-1 bg-gray-600 rounded-md ml-2">
                        <span class="text-xs text-white">Voir **Semaine 2** de **"Programmer en s'amusant avec Python..."**</span>
                    </div>
                </li>
                <li>Apprenez les **Fonctions** (<code>def</code>) pour organiser votre code.</li>
            </ul>
        </footer>
    </div>

    <!-- JavaScript pour l'Assistant IA -->
    <script type="module">
        // La cl√© API est intentionnellement laiss√©e vide ici. 
        // L'environnement Canvas fournira la cl√© au moment de l'ex√©cution.
        const apiKey = ""; 
        const model = 'gemini-2.5-flash-preview-09-2025';
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;

        const interestInput = document.getElementById('interest');
        const generateBtn = document.getElementById('generate-btn');
        const loadingDiv = document.getElementById('loading');
        const resultDiv = document.getElementById('result');
        const geminiOutput = document.getElementById('gemini-output');
        const errorDiv = document.getElementById('error-message');
        const errorText = document.getElementById('error-text');

        // Fonction pour g√©rer les erreurs et l'affichage
        const displayError = (message) => {
            errorText.textContent = message;
            errorDiv.classList.remove('hidden');
            loadingDiv.classList.add('hidden');
            resultDiv.classList.add('hidden');
        };

        // Impl√©mentation de la fonction d'attente (sleep)
        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // Fonction principale pour l'appel √† l'API
        const generateProjectIdea = async () => {
            const userQuery = interestInput.value.trim();
            if (!userQuery) {
                displayError("Veuillez entrer votre niveau et vos int√©r√™ts pour que l'IA puisse vous aider.");
                return;
            }

            // R√©initialiser les affichages
            resultDiv.classList.add('hidden');
            errorDiv.classList.add('hidden');
            loadingDiv.classList.remove('hidden');
            generateBtn.disabled = true;

            const systemPrompt = "Act as a world-class Python programming tutor. Your goal is to suggest a beginner-friendly, educational Python project based on the user's input, and provide the first concrete step to get started. Respond only in French.";

            const userPrompt = `Je suis un d√©butant en programmation. Mon niveau et mes int√©r√™ts sont : "${userQuery}". Sugg√®re-moi un projet Python adapt√© et donne-moi la premi√®re action concr√®te √† faire (par exemple: 'Installer la librairie X' ou 'D√©finir les variables Y'). Mentionne si possible un Chapitre ou une Semaine d'un des deux livres fournis ("Python pour les Nuls, 3e √©d." ou "Programmer en s'amusant avec Python pour les Nuls, 3e √©d.") comme r√©f√©rence si le concept est abord√© (ex: Pour ce projet, il vous faudra utiliser les boucles (voir Chapitre 5 de 'Python pour les Nuls, 3e √©d.')).`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
                config: {
                    temperature: 0.7
                }
            };
            
            let response;
            const maxRetries = 3;
            for (let i = 0; i < maxRetries; i++) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        break; // Succ√®s, sortir de la boucle
                    } else if (response.status === 429 && i < maxRetries - 1) {
                        // G√©rer le cas de throttling (trop de requ√™tes) avec backoff exponentiel
                        const delay = Math.pow(2, i) * 1000; // 1s, 2s, 4s
                        await sleep(delay);
                        continue; // Tenter √† nouveau
                    } else {
                        throw new Error(`Erreur HTTP: ${response.status} ${response.statusText}`);
                    }
                } catch (e) {
                    if (i === maxRetries - 1) {
                        displayError(`Impossible de contacter l'API apr√®s ${maxRetries} tentatives. Veuillez r√©essayer plus tard.`);
                        console.error(e);
                        generateBtn.disabled = false;
                        return;
                    }
                }
            }
            
            // Traiter la r√©ponse
            try {
                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    const text = candidate.content.parts[0].text;
                    geminiOutput.textContent = text;
                    resultDiv.classList.remove('hidden');
                } else {
                    displayError("L'IA n'a pas pu g√©n√©rer de r√©ponse. Le format de r√©ponse est incorrect.");
                    console.error("R√©ponse API inattendue:", result);
                }
            } catch (e) {
                displayError("Erreur lors du traitement de la r√©ponse de l'IA.");
                console.error(e);
            }

            // Termin√©
            loadingDiv.classList.add('hidden');
            generateBtn.disabled = false;
        };

        generateBtn.addEventListener('click', generateProjectIdea);
        
        // Permettre d'utiliser la touche Entr√©e dans le champ de saisie
        interestInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                generateProjectIdea();
            }
        });
    </script>
</body>
</html>
